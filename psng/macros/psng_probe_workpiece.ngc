o<psng_probe_workpiece> sub
;o<psng_hook> call [5]

o<psng_config_check> call

o90 if [#<_hal[probe.setterheight]> LE 0]
     o<psng_hook_end> call
    (ABORT,TOOLSETTER HEIGHT NOT PROBED/CONFIGURED)
o90 endif

o300 if [#<_current_tool> NE 1]
     o<psng_hook_end> call
     (ABORT,PROBING WORKPIECE IS NOT ALLOWED WITHOUT 3D PROBE AS TOOL 1)
o300 endif

(cancel Z offsets But use tool offset)
G43          ; force tool offset for correct calc
G10 L2 P0 Z0 ; reset G54 offset for correct pieces measurement

#<z>=#<_z> (save current Z position)

o<psng_start_touch_probing> call

#<touch_result> = #5063
(print, probe Z=#<touch_result>)

; "G10 L2 P0 Z%s" % blockheight is done inside python code due to multiple possibility for set workpieces height

(back to start point)
G1 Z#<z> F#<_ini[TOOLSENSOR]RAPID_SPEED>   

;o<psng_hook_end> call
o<psng_probe_workpiece> endsub
M2
